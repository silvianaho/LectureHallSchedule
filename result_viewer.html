<html>

<head>
  <meta content="width=device-width, initial-scale=1" name="viewport" />
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/style-resultviewer.css" />
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet" />
  <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
    integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
    integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous" />
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
    integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
    crossorigin="anonymous"></script>
  <script src="./index.js" type="text/javascript"></script>
  <script src="https://code.jquery.com/jquery-3.5.1.js" integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc="
    crossorigin="anonymous"></script>
  <link rel="stylesheet" href="./css/timetablejs.css" />

  <script src="./js/timetable.js"></script>
  <title>JiBaBoom</title>
</head>

<body>
  <div class="wrapper">
    <!-- Sidebar -->
    <nav id="sidebar">
      <div class="sidebar-header">
        <h3>JiBaBoom</h3>
        <strong>JBB</strong>
        <h2 class="h2 d-lg-inline-block d-none" id="sidebar-collapse">
          <span class="close-side">&#171;</span>
          <span class="open">&#187;</span>
        </h2>
      </div>

      <ul class="list-unstyled components">
        <p class="font-weight-bold mb-0">DATA VIEW</p>
        <li class="nav-item">
          <a class="nav-link ml-3 py-1" href="./index.html">
            <span>Lectures</span>
            <i class="material-icons">class</i>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link ml-3 py-1" href="./advance-dataviewer.html">
            <span>Technicians</span>
            <i class="material-icons">engineering</i>
          </a>
        </li>
      </ul>
      <ul class="list-unstyled components">
        <p class="font-weight-bold mb-0">SCHEDULE</p>
        <li class="nav-item">
          <a class="nav-link ml-3 py-1" href="./result_viewer.html">
            <span>Lectures</span>
            <i class="material-icons">class</i>
          </a>
        </li>
        <li class="nav-item">
          <a class="nav-link ml-3 py-1" href="./result_viewer.html">
            <span>Technicians</span>
            <i class="material-icons">engineering</i>
          </a>
        </li>
      </ul>
    </nav>
    <!-- content -->
    <div class="px-3 mx-3" id="content">

      <div class="timetable">
        <script src="https://code.jquery.com/jquery-3.5.1.js"
          integrity="sha256-QWo7LDvxbWT2tbbQ97B53yJnYU3WhH/C8ycbRAkjPDc=" crossorigin="anonymous"></script>
        <link rel="stylesheet" href="./css/timetablejs.css" />

        <script src="./js/timetable.js"></script>
      </div>
    </div>


</body>
<script>
  const host = 'https://fsp-jibaboom-2a14-teamsos.herokuapp.com';
  const basicResultUrl = host + "/basic/result";

  function getResult(facultyId, semesterId, dayOfWeek) {
    const settings = {
      url: basicResultUrl,
      method: "GET",
      timeout: 0,
      headers: {
        "Content-Type": "application/x-www-form-urlencoded",
      },
      data: resultQuery,
    };

    $.ajax(settings)
      .done((response) => {
        // console.log(response);
        addLectureData(response);
      })
  }

  function addLectureData(lectures) {
    let hallsList = [];
    let lecturesList = [];
    for (let i = 0; i < lectures.length; i++) {
      hallsList.push("Hall " + (i + 1));
      lectures[i].forEach(lecture => {
        lecturesList.push(lecture.lectureId, hallsList.halls[i], lecture.startTime, lecture.endTime)
        // tt.addLecture(lecture.lectureId, lecture.startTime, lecture.endTime, tt.halls[i], "meow");
      });
    }
  }

  function loadTable(data) {
    console.log(data);

    var timetable = new Timetable();
    timetable.setScope(9, 17); // optional, only whole hours between 0 and 23
    timetable.useTwelveHour(); //optional, displays hours in 12 hour format (1:00PM)
    timetable.addLocations(['hall 1', 'hall 2']);
    timetable.addEvent(
      'lecture 1',
      'hall 1',
      new Date('2020/01/01 09:00:00'),
      new Date('2020/01/01 11:00:00'),
      {
        onClick: function () {
          console.log('lecture1');
        },
      },
    );
    timetable.addEvent(
      'lecture 2',
      'hall 2',
      new Date('2020/01/01 13:00:11'),
      new Date('2020/01/01 15:13:00'),
      {
        onClick: function () {
          console.log('lecture2');
        },
      },
    );
    var renderer = new Timetable.Renderer(timetable);
    renderer.draw('.timetable'); // any css selector
  }

  $(document).ready(() => {
    const { facultyId, semesterId, dayOfWeek } = {
      facultyId: 1100000000,
      semesterId: 1110000000,
      dayOfWeek: 4,
    };
    getResult(facultyId, semesterId, dayOfWeek, loadTable);
    setTimeout(() => loadTable(), 500);
  });

</script>

</html>